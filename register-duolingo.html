<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - ElderConnect</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            background: radial-gradient(circle at 18% 18%, rgba(191, 215, 234, 0.3), transparent 55%), #f4f4f0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 24px;
        }
        
        .register-container {
            background: #f7f9fd;
            border-radius: 26px;
            box-shadow: 0 26px 60px rgba(52, 85, 143, 0.16);
            width: min(480px, 100%);
            padding: 38px 32px 44px;
            border: 1px solid rgba(181, 202, 226, 0.6);
        }
        
        .register-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, #4472ca, #3c787e, #8ca0d7);
        }

        .logo {
            font-size: 2.2rem;
            font-weight: 700;
            color: #223a5e;
            text-align: center;
            margin-bottom: 18px;
        }

        .logo span {
            color: #3c787e;
        }
        
        h1 {
            text-align: center;
            font-size: 1.95rem;
            color: #223a5e;
            margin: 0;
        }
        
        .subtitle {
            text-align: center;
            color: #53617c;
            margin: 8px auto 28px;
            max-width: 22rem;
            line-height: 1.55;
        }
        
        .progress-bar {
            height: 6px;
            background: rgba(191, 215, 234, 0.35);
            border-radius: 999px;
            overflow: hidden;
            margin-bottom: 28px;
        }
        
        .progress {
            width: 45%;
            height: 100%;
            background: linear-gradient(135deg, #4472ca, #34558f);
            border-radius: inherit;
        }
        
        .form-group {
            margin-bottom: 22px;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #223a5e;
        }
        
        small {
            display: block;
            margin-top: 6px;
            color: #5a6a85;
        }
        
        input[type="text"],
        input[type="number"],
        input[type="email"],
        select,
        textarea {
            width: 100%;
            padding: 14px 16px;
            border-radius: 16px;
            border: 1px solid rgba(181, 202, 226, 0.7);
            background: rgba(255, 255, 255, 0.95);
            font-family: inherit;
            transition: border 0.2s ease, box-shadow 0.2s ease;
        }
        
        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #4472ca;
            box-shadow: 0 0 0 4px rgba(68, 114, 202, 0.22);
        }
        
        textarea {
            resize: vertical;
        }
        
        /* Special styling for loneliness level selection */
        #loneliness-level {
            border: 2px solid #4472ca;
            background-color: rgba(191, 215, 234, 0.35);
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
            gap: 14px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 14px;
            border-radius: 16px;
            border: 1px solid rgba(181, 202, 226, 0.7);
            background: rgba(255, 255, 255, 0.94);
            transition: border 0.2s ease, box-shadow 0.2s ease;
            color: #223a5e;
        }
        
        .checkbox-item:hover,
        .radio-option:hover {
            border-color: #4472ca;
            box-shadow: 0 14px 28px rgba(68, 114, 202, 0.2);
        }
        
        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin-top: 4px;
            transform: scale(1.3);
        }
        
        .checkbox-item label {
            font-weight: 500;
            color: #223a5e;
            margin: 0;
        }
        
        .submit-btn {
            width: 100%;
            background: linear-gradient(135deg, #4472ca, #34558f);
            color: #f9fbff;
            border: none;
            border-radius: 18px;
            padding: 15px 18px;
            font-size: 1.05rem;
            font-weight: 600;
            margin-top: 6px;
            box-shadow: 0 18px 34px rgba(68, 114, 202, 0.28);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 26px 44px rgba(52, 85, 143, 0.32);
        }
        
        .submit-btn:active {
            transform: translateY(0);
        }
        
        .back-link {
            text-align: center;
            margin-top: 25px;
            padding-top: 25px;
            border-top: 1px solid rgba(181, 202, 226, 0.6);
        }
        
        .back-link a {
            color: #3c787e;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-link a:hover {
            color: #43cea2;
            text-decoration: underline;
        }
        
        .footer-links {
            margin-top: 28px;
            display: flex;
            justify-content: center;
            gap: 18px;
            color: #8a968b;
            font-size: 0.9rem;
        }
        
        .footer-links a {
            color: inherit;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 14px;
            margin-bottom: 12px;
        }

        .radio-option {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            background: rgba(255, 255, 255, 0.85);
            border: 1px solid rgba(212, 202, 190, 0.7);
            border-radius: 18px;
            padding: 14px 16px;
            transition: border 0.2s ease, box-shadow 0.2s ease;
            color: #31443d;
        }

        .radio-option input {
            transform: scale(1.1);
        }

        .duo-volunteer-section {
            margin-top: 25px;
            padding: 22px;
            background: #eef5ff;
            border-radius: 18px;
            border: 1px solid #c9ddff;
        }

        .duo-volunteer-section h2 {
            margin-top: 0;
            margin-bottom: 18px;
            color: #2c5be0;
            font-size: 1.2rem;
        }

        body[data-registration-role="volunteer"] #duo-survey-section {
            display: none !important;
        }

        .duo-volunteer-focus {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }

        .duo-volunteer-focus .checkbox-item {
            align-items: flex-start;
        }
        
        #duo-survey-section,
        #duo-volunteer-section {
            background: rgba(255, 255, 255, 0.92);
            border-radius: 20px;
            border: 1px solid rgba(212, 202, 190, 0.8);
            padding: 22px;
            margin-top: 22px;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
        }

        @media (max-width: 520px) {
            body {
                padding: 16px;
            }
            .register-container {
                padding: 32px 24px 40px;
                border-radius: 22px;
            }
            .checkbox-group,
            .radio-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="register-container">
        <div class="logo">Elder<span>Connect</span></div>
        <h1>Create Your Profile</h1>
        <p class="subtitle">Help us personalize your experience and connect you with activities that match your interests</p>
        
        <div class="progress-bar">
            <div class="progress"></div>
        </div>
        
        <form id="registration-form">
            <div class="form-group">
                <label>Your Role *</label>
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="userType" value="elderly" checked>
                        <span>Elderly User (find activities and companions)</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="userType" value="volunteer">
                        <span>Volunteer (support seniors and log wellness)</span>
                    </label>
                </div>
                <small>Volunteers can rate events and complete well-being check-ins for seniors.</small>
            </div>

            <div class="duo-volunteer-section" id="duo-volunteer-section" style="display: none;">
                <h2>Volunteer Preferences</h2>
                <div class="form-group">
                    <label for="duo-volunteer-experience">Experience supporting seniors *</label>
                    <select id="duo-volunteer-experience" name="volunteerExperience" class="duo-volunteer-field" required>
                        <option value="">Select your experience level</option>
                        <option value="first-time">First-time volunteer</option>
                        <option value="some-experience">Some informal experience</option>
                        <option value="professional">Professional caregiver / social worker</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>How would you like to help? *</label>
                    <div class="duo-volunteer-focus">
                        <label class="checkbox-item">
                            <input type="checkbox" name="volunteerFocus" value="companionship" class="duo-volunteer-field">
                            Friendly companionship & conversation circles
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="volunteerFocus" value="wellness-checks" class="duo-volunteer-field">
                            Wellness check-ins & confidence coaching
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="volunteerFocus" value="event-support" class="duo-volunteer-field">
                            Event support & activity coordination
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="volunteerFocus" value="logistics" class="duo-volunteer-field">
                            Logistics (transport, reminders, scheduling)
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="duo-volunteer-qualifications">Relevant qualifications or training</label>
                    <textarea id="duo-volunteer-qualifications" name="volunteerQualifications" class="duo-volunteer-field" rows="3" placeholder="List any caregiving, counselling, social work or specialised training"></textarea>
                </div>
                <div class="form-group">
                    <label>Do you hold a valid first-aid certificate? *</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="volunteerFirstAid" value="yes" class="duo-volunteer-field" required>
                            <span>Yes, within the last 2 years</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="volunteerFirstAid" value="in-progress" class="duo-volunteer-field">
                            <span>Currently training / scheduled</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="volunteerFirstAid" value="no" class="duo-volunteer-field">
                            <span>Not yet, would like support</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="duo-volunteer-motivation">Why do you want to volunteer?</label>
                    <textarea id="duo-volunteer-motivation" name="volunteerMotivation" class="duo-volunteer-field" rows="3" placeholder="Share what inspires you"></textarea>
                </div>
            </div>
            
            <div class="form-group">
                <label for="preferred-name">Preferred Name *</label>
                <input type="text" id="preferred-name" name="preferredName" placeholder="Enter your preferred name" required>
                <small>The app will call you by this name</small>
            </div>
            
            <div class="form-group">
                <label for="age">Age *</label>
                <input type="number" id="age" name="age" min="50" data-elder-min="50" data-elder-placeholder="Enter your age (50+)" data-volunteer-placeholder="Enter your age" placeholder="Enter your age (50+)" required>
                <small>To group you with similar age participants</small>
            </div>
            
            <div class="form-group">
                <label for="gender">Gender *</label>
                <select id="gender" name="gender" required>
                    <option value="">Select your gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="non-binary">Non-binary</option>
                    <option value="prefer-not-to-say">Prefer not to say</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="medical-needs">Medical Needs or Disabilities</label>
                <textarea id="medical-needs" name="medicalNeeds" placeholder="Any medical conditions, mobility issues, or special requirements we should know about?" rows="3"></textarea>
            </div>
            
            <div class="form-group">
                <label>Interests and Hobbies *</label>
                <small>Select all that apply</small>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="interest1" name="interests" value="Board Games">
                        <label for="interest1">Board Games</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="interest2" name="interests" value="Gardening">
                        <label for="interest2">Gardening</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="interest3" name="interests" value="Reading">
                        <label for="interest3">Reading</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="interest4" name="interests" value="Cooking">
                        <label for="interest4">Cooking</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="interest5" name="interests" value="Arts & Crafts">
                        <label for="interest5">Arts & Crafts</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="interest6" name="interests" value="Music">
                        <label for="interest6">Music</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="interest7" name="interests" value="Walking">
                        <label for="interest7">Walking</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="interest8" name="interests" value="Travel">
                        <label for="interest8">Travel</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="interest9" name="interests" value="Volunteering">
                        <label for="interest9">Volunteering</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="interest10" name="interests" value="Technology">
                        <label for="interest10">Technology</label>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label for="personality">Personality Type *</label>
                <select id="personality" name="personality" required>
                    <option value="">Select your personality type</option>
                    <option value="introvert">Introvert</option>
                    <option value="extrovert">Extrovert</option>
                    <option value="ambivert">Ambivert</option>
                </select>
            </div>
            
            <!-- Mental Well-being Assessment -->
            <div id="duo-survey-section">
                <div class="form-group">
                    <label for="loneliness-level">Loneliness Level *</label>
                    <select id="loneliness-level" name="lonelinessLevel" class="survey-field" required>
                        <option value="">Select your current loneliness level</option>
                        <option value="mild">Mild - I feel generally connected but sometimes lonely</option>
                        <option value="moderate">Moderate - I often feel lonely and seek more connections</option>
                        <option value="severe">Severe - I feel isolated and need significant support</option>
                    </select>
                    <small>This helps us recommend activities that best suit your social needs</small>
                </div>
                
                <div class="form-group">
                    <label for="well-being-goals">Well-being Goals</label>
                    <textarea id="well-being-goals" name="wellBeingGoals" class="survey-field" placeholder="What would you like to improve about your mental well-being? (e.g., reduce loneliness, find motivation, build confidence)" rows="3"></textarea>
                    <small>For users with severe loneliness, we provide additional AI support and therapeutic activities</small>
                </div>
            </div>
            
            <button type="submit" class="submit-btn">Save Profile & Continue</button>
        </form>
        
        <div class="back-link">
            <a href="index-duolingo.html">‚Üê Back to Welcome Page</a>
        </div>
        
        <div class="footer-links">
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
            <a href="#">Help Center</a>
        </div>
    </div>

    <script>
        const duoSurveySection = document.getElementById('duo-survey-section');
        const duoSurveyFields = Array.from(document.querySelectorAll('#duo-survey-section .survey-field'));
        const duoRoleInputs = document.querySelectorAll('input[name="userType"]');
        const duoVolunteerSection = document.getElementById('duo-volunteer-section');
        const duoVolunteerFields = duoVolunteerSection ? Array.from(duoVolunteerSection.querySelectorAll('.duo-volunteer-field')) : [];
        const duoVolunteerCheckboxes = duoVolunteerSection ? Array.from(duoVolunteerSection.querySelectorAll('input[name="volunteerFocus"]')) : [];
        const duoVolunteerRadios = duoVolunteerSection ? Array.from(duoVolunteerSection.querySelectorAll('input[name="volunteerFirstAid"]')) : [];
        const duoAgeInput = document.getElementById('age');
 
        function storeOriginalRequirement(field) {
            if (!field.dataset.originalRequired) {
                field.dataset.originalRequired = field.hasAttribute('required') ? 'true' : 'false';
            }
        }

        duoSurveyFields.forEach(storeOriginalRequirement);
        duoVolunteerFields.forEach(storeOriginalRequirement);

        function setDuoFieldRequired(field, shouldRequire) {
            if (shouldRequire) {
                if (field.dataset.originalRequired === 'true') {
                    field.setAttribute('required', '');
                }
            } else {
                field.removeAttribute('required');
            }
        }

        function clearDuoField(field) {
            if (field.type === 'radio' || field.type === 'checkbox') {
                field.checked = false;
            } else if (field.tagName === 'SELECT') {
                field.selectedIndex = 0;
            } else {
                field.value = '';
            }
        }

        function updateDuoRoleSections(role) {
            const isVolunteer = role === 'volunteer';
            document.body.setAttribute('data-registration-role', isVolunteer ? 'volunteer' : 'elderly');

            if (duoSurveySection) {
                if (isVolunteer) {
                    duoSurveySection.style.display = 'none';
                    duoSurveyFields.forEach(field => {
                        setDuoFieldRequired(field, false);
                        clearDuoField(field);
                    });
                } else {
                    duoSurveySection.style.display = '';
                    duoSurveyFields.forEach(field => {
                        setDuoFieldRequired(field, true);
                    });
                }
            }

            if (duoVolunteerSection) {
                if (isVolunteer) {
                    duoVolunteerSection.style.display = '';
                    duoVolunteerFields.forEach(field => {
                        if (field.type === 'checkbox' || field.type === 'radio') {
                            field.removeAttribute('required');
                        } else {
                            setDuoFieldRequired(field, true);
                        }
                    });
                    if (duoVolunteerCheckboxes.length > 0) {
                        duoVolunteerCheckboxes[0].setAttribute('required', '');
                    }
                    if (duoVolunteerRadios.length > 0) {
                        duoVolunteerRadios[0].setAttribute('required', '');
                    }
                } else {
                    duoVolunteerSection.style.display = 'none';
                    duoVolunteerFields.forEach(field => {
                        setDuoFieldRequired(field, false);
                        clearDuoField(field);
                    });
                    duoVolunteerCheckboxes.forEach(box => {
                        box.removeAttribute('required');
                        box.checked = false;
                    });
                    duoVolunteerRadios.forEach(radio => {
                        radio.removeAttribute('required');
                        radio.checked = false;
                    });
                }
            }

            if (duoAgeInput) {
                if (isVolunteer) {
                    duoAgeInput.removeAttribute('min');
                    duoAgeInput.placeholder = duoAgeInput.dataset.volunteerPlaceholder || 'Enter your age';
                } else {
                    if (duoAgeInput.dataset.elderMin) {
                        duoAgeInput.setAttribute('min', duoAgeInput.dataset.elderMin);
                    }
                    duoAgeInput.placeholder = duoAgeInput.dataset.elderPlaceholder || duoAgeInput.placeholder;
                }
            }
        }

        duoRoleInputs.forEach(input => {
            input.addEventListener('change', function() {
                updateDuoRoleSections(this.value);
            });
        });

        const duoInitialRole = document.querySelector('input[name="userType"]:checked');
        updateDuoRoleSections(duoInitialRole ? duoInitialRole.value : 'elderly');

        document.getElementById('registration-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            console.log('Form submission started');
            
            // Get form data
            const formData = new FormData(this);
            const profileData = {};
            
            // Collect text inputs and selects
            for (const [key, value] of formData.entries()) {
                if (key !== 'interests' && key !== 'volunteerFocus') {
                    profileData[key] = value;
                }
            }
            
            // Collect interests (multiple checkboxes)
            const interests = formData.getAll('interests');
            profileData.interests = interests;

            const volunteerFocus = formData.getAll('volunteerFocus');
            if (volunteerFocus.length > 0) {
                profileData.volunteerFocus = volunteerFocus;
            } else {
                delete profileData.volunteerFocus;
            }

            const selectedRole = profileData.userType || 'elderly';

            if (selectedRole === 'volunteer') {
                delete profileData.lonelinessLevel;
                delete profileData.wellBeingGoals;
                delete profileData.mentalWellBeingCategory;
            } else {
                const lonelinessLevel = profileData.lonelinessLevel;
                if (lonelinessLevel === 'mild') {
                    profileData.mentalWellBeingCategory = 'social';
                } else if (lonelinessLevel === 'moderate') {
                    profileData.mentalWellBeingCategory = 'balanced';
                } else if (lonelinessLevel === 'severe') {
                    profileData.mentalWellBeingCategory = 'wellness';
                } else {
                    delete profileData.mentalWellBeingCategory;
                }
            }

            console.log('Profile data collected:', profileData);
            
            // Store in localStorage for persistence
            try {
                console.log('Attempting to save profile to localStorage');
                localStorage.setItem('elderConnectProfile', JSON.stringify(profileData));
                
                // Verify that the profile was saved
                const savedProfile = localStorage.getItem('elderConnectProfile');
                console.log('Profile saved to localStorage:', savedProfile);
                
                // Show success message and redirect
                alert(`Thank you, ${profileData.preferredName || 'valued member'}! Your profile has been saved successfully.`);
                if (profileData.userType === 'volunteer') {
                    window.location.href = 'volunteer-dashboard.html';
                } else {
                    window.location.href = 'elder-connect-simple.html';
                }
            } catch (error) {
                console.error('Error saving profile:', error);
                alert('There was an error saving your profile. Please try again.');
            }
        });
        
        // Check if user already has a profile
        document.addEventListener('DOMContentLoaded', function() {
            const savedProfile = localStorage.getItem('elderConnectProfile');
            if (savedProfile) {
                try {
                    const profileData = JSON.parse(savedProfile);
                    console.log('Existing profile data loaded:', profileData);
                    if (profileData.preferredName) {
                        document.getElementById('preferred-name').value = profileData.preferredName;
                    }
                    if (profileData.age) {
                        document.getElementById('age').value = profileData.age;
                    }
                    if (profileData.gender) {
                        document.getElementById('gender').value = profileData.gender;
                    }
                    if (profileData.medicalNeeds) {
                        document.getElementById('medical-needs').value = profileData.medicalNeeds;
                    }
                    if (profileData.interests && Array.isArray(profileData.interests)) {
                        profileData.interests.forEach(interest => {
                            const checkbox = document.querySelector(`input[value="${interest}"]`);
                            if (checkbox) {
                                checkbox.checked = true;
                            }
                        });
                    }
                    if (profileData.personality) {
                        document.getElementById('personality').value = profileData.personality;
                    }
                    if (profileData.lonelinessLevel) {
                        document.getElementById('loneliness-level').value = profileData.lonelinessLevel;
                    }
                    if (profileData.wellBeingGoals) {
                        document.getElementById('well-being-goals').value = profileData.wellBeingGoals;
                    }
                    if (profileData.userType) {
                        const roleInput = document.querySelector(`input[name="userType"][value="${profileData.userType}"]`);
                        if (roleInput) roleInput.checked = true;
                    }
                    if (profileData.volunteerExperience) {
                        const experienceSelect = document.getElementById('duo-volunteer-experience');
                        if (experienceSelect) experienceSelect.value = profileData.volunteerExperience;
                    }
                    if (profileData.volunteerFocus && Array.isArray(profileData.volunteerFocus)) {
                        profileData.volunteerFocus.forEach(focus => {
                            const focusCheckbox = document.querySelector(`input[name="volunteerFocus"][value="${focus}"]`);
                            if (focusCheckbox) focusCheckbox.checked = true;
                        });
                    }
                    if (profileData.volunteerFocus && !Array.isArray(profileData.volunteerFocus)) {
                        const focusCheckbox = document.querySelector(`input[name="volunteerFocus"][value="${profileData.volunteerFocus}"]`);
                        if (focusCheckbox) focusCheckbox.checked = true;
                    }
                    if (profileData.volunteerFirstAid) {
                        const firstAidRadio = document.querySelector(`input[name="volunteerFirstAid"][value="${profileData.volunteerFirstAid}"]`);
                        if (firstAidRadio) firstAidRadio.checked = true;
                    }
                    if (profileData.volunteerQualifications) {
                        const qualificationsField = document.getElementById('duo-volunteer-qualifications');
                        if (qualificationsField) qualificationsField.value = profileData.volunteerQualifications;
                    }
                    if (profileData.volunteerMotivation) {
                        const motivationField = document.getElementById('duo-volunteer-motivation');
                        if (motivationField) motivationField.value = profileData.volunteerMotivation;
                    }
                    updateDuoRoleSections(profileData.userType || 'elderly');
                } catch (e) {
                    console.error('Error loading saved profile:', e);
                }
            }
        });
    </script>
</body>
</html>